# 2022/12/06

## 로드밸런싱이란?

![](https://velog.velcdn.com/images/ririti/post/f0fe7826-54df-40ba-9fc1-b51b0f43792a/image.png)



>부하 분산을 위해서 가상 IP를 통해 여러 서버에 접속하도록 분배하는 기능을 말한다.


### 로드밸런싱 알고리즘

**1.라운드 로빈**
- 클라이언트로부터 받은 요청을 로드밸런싱 대상 서버에 순서대로 할당받는 방식

**2.가중 라운드로빈 방식**
- 가중치가 높은 서버에 요청을 우선적으로 배정하는 방식
  서버의 트래픽 처리 능력이 다른 경우 사용한다.

**3.최소 연결 방식**
- 요청이 들어온 시점에 가장 적은 연결 상태를 보이는 서버에 트래픽을 배정하는 방식.

**4.IP 해시 방식**
- 클라이언트의 IP 주소를 특정 서버로 매핑하여 요청을 처리하는 방식
-  IP를 통해 분배하기 때문에 사용자가 항상 동일한 서버로 연결되는 것을 보장한다.


### DNS
메인 이름을 IP 주소로 변환하는 기술인데 하나의 도메인 이름을 라운드로빈방식으로 여러 개의 IP 주소로 변환한다면 이것만으로도 부하 분산이 가능하다.

### 단점

- 대부분의 클라이언트에서 DNS 서버의 부하를 줄이고 성능을 향상하기 위해 일정 시간 동안 캐싱하기 때문에 분산이 균등하게 되지 않는다.

- 특정 서버에 장애가 발생하더라도 장애 여부가 감지되지 않아 서비스에서 해당 서버를 제거할 수 없다.
    - 대안으로 health check로 장애를 감지하여 DNS 서버에서 제거할 수 있지만, 모든 DNS 서버에 적용되는 데에 많은 시간이 걸리며 클라이언트의 캐싱 때문에 서버가 서비스에서 바로 제거되지 않는다.